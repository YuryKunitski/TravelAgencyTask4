<div class="container">
    <h1 class="page-name">Countries</h1>

    <div *ngIf="userService.isAdmin()">
      <form #countryForm="ngForm" (ngSubmit)="createCountry(countryForm)" >
        <input type="text" id="countryName" class="form-control" placeholder="Type a country to add and press enter..." 
               required 
               name="name" [(ngModel)]="newCountry.name"
               #name="ngModel" ><br>
        <div *ngIf="name.errors && name.dirty"
             class="alert alert-danger">
            <div [hidden]="!name.errors.required">
              name is required.
            </div>
        </div>
        <button type="submit" class="btn btn-success">Add country</button>
      </form>
    </div>

    <br>

    <table class="table table-striped">
        <thead>
            <tr style="color: rgb(25, 102, 15)">
                <td>Name</td>
                <td *ngIf="userService.isAdmin()"></td>
            </tr>
        </thead>
        <tbody>
           
            <tr *ngFor="let country of countries | paginate: { itemsPerPage: count, currentPage: page }">
                <td>
                    <div class="entity-row" *ngIf="!editing || editingCountry.id != country.id"> 
                        <span class="entity-name">
                          {{country.name}}
                        </span>
                    </div>
                    <div class="entity-edit" *ngIf="editing && editingCountry.id === country.id">
                        <input  type="text" 
                        [(ngModel)]="editingCountry.name" required>
                    </div>

                </td>
                <td *ngIf="userService.isAdmin()">
                    <div class="entity-row" *ngIf="!editing || editingCountry.id != country.id"> 
                        
                       <span class="entity-actions" style="cursor: pointer">
                           <a (click)="editCountry(country)">
                             <i class="material-icons edit">edit</i>
                           </a>
                           <a (click)="deleteCountry(country.id)">
                             <i class="material-icons delete">delete</i>
                           </a>
                       </span>
                    </div>

                    <div class="entity-edit" *ngIf="editing && editingCountry.id === country.id">
                        <span class="edit-actions-custom" style="cursor: pointer">
                            <a (click)="updateCountry(editingCountry)">
                              <i class="material-icons">done</i>
                            </a>
                            <a (click)="clearEditing()">
                              <i class="material-icons">clear</i>
                            </a>
                        </span>
                    </div> 
                </td>
            </tr>
        </tbody>
    </table>
        
<!--Including the pagination control.-->
<div class="text-right">
    <pagination-controls (pageChange)="page = $event"></pagination-controls>
  </div>

    <div class="no-entities" *ngIf="countries?.length==0">
        <p>No entities Found!</p>
    </div>